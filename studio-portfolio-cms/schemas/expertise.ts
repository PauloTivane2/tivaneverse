import { defineField, defineType } from 'sanity'
import { BulbOutlineIcon } from '@sanity/icons'

export const expertise = defineType({
  name: 'expertise',
  title: 'Expertise & Skills',
  type: 'document',
  icon: BulbOutlineIcon,
  fields: [
    defineField({
      name: 'name',
      title: 'Nome da Habilidade',
      type: 'string',
      description: 'Nome da tecnologia ou habilidade (ex: React, TypeScript, Node.js)',
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: 'iconName',
      title: '√çcone',
      type: 'string',
      description: 'üîç Pesquise e selecione o √≠cone da tecnologia. Se n√£o encontrar, selecione "‚úèÔ∏è Customizado" e use o campo abaixo.',
      options: {
        list: [
          // === OP√á√ÉO CUSTOMIZADA ===
          { title: '‚úèÔ∏è Customizado (usar campo abaixo)', value: 'CUSTOM' },
          { title: '‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ', value: 'separator1' },
          
          // ===== ORDEM ALFAB√âTICA =====
          { title: '‚úèÔ∏è Adobe', value: 'TbBrandAdobe' },
          { title: 'üíé Adobe XD', value: 'SiAdobexd' },
          { title: 'üÖ∞Ô∏è Angular', value: 'SiAngular' },
          { title: 'üÖ∞Ô∏è Angular (Brand)', value: 'TbBrandAngular' },
          { title: 'ü§ñ Android', value: 'FaAndroid' },
          { title: 'ü§ñ Android (Brand)', value: 'TbBrandAndroid' },
          { title: 'üîå API', value: 'TbApi' },
          { title: 'üçé Apple', value: 'FaApple' },
          { title: 'üçé Apple (Brand)', value: 'TbBrandApple' },
          { title: 'üöÄ Astro', value: 'SiAstro' },
          { title: '‚òÅÔ∏è AWS', value: 'SiAmazon' },
          { title: '‚òÅÔ∏è AWS (Brand)', value: 'TbBrandAws' },
          { title: '‚òÅÔ∏è Azure', value: 'TbBrandAzure' },
          { title: 'üñ•Ô∏è BitBucket', value: 'TbBrandBitbucket' },
          { title: 'üÖ±Ô∏è Bootstrap', value: 'SiBootstrap' },
          { title: 'üÖ±Ô∏è Bootstrap (Brand)', value: 'TbBrandBootstrap' },
          { title: 'üì¶ Box', value: 'FiBox' },
          { title: 'üî∑ C', value: 'SiC' },
          { title: '‚ûï C++', value: 'SiCplusplus' },
          { title: '‚ûï C++ (Brand)', value: 'TbBrandCpp' },
          { title: 'üîµ C#', value: 'SiSharp' },
          { title: 'üîÆ Chakra UI', value: 'SiChakraui' },
          { title: 'üåê Chrome', value: 'TbBrandChrome' },
          { title: 'üîµ Circle', value: 'FiCircle' },
          { title: '‚òÅÔ∏è Cloud', value: 'TbCloud' },
          { title: 'üíª Code', value: 'FiCode' },
          { title: '‚åò Command', value: 'FiCommand' },
          { title: 'üìù Contentful', value: 'SiContentful' },
          { title: 'üíæ CPU', value: 'FiCpu' },
          { title: 'üé® CSS3', value: 'SiCss3' },
          { title: 'üå≤ Cypress', value: 'SiCypress' },
          { title: 'üìä D3.js', value: 'SiD3Dotjs' },
          { title: 'üéØ Dart', value: 'SiDart' },
          { title: 'üíæ Database (Icon)', value: 'FiDatabase' },
          { title: 'üêß Debian', value: 'TbBrandDebian' },
          { title: 'üñ•Ô∏è Desktop', value: 'TbDeviceDesktop' },
          { title: 'üñ•Ô∏è Discord', value: 'TbBrandDiscord' },
          { title: 'üé∏ Django', value: 'SiDjango' },
          { title: 'üé∏ Django (Brand)', value: 'TbBrandDjango' },
          { title: 'üê≥ Docker', value: 'SiDocker' },
          { title: 'üê≥ Docker (Brand)', value: 'TbBrandDocker' },
          { title: 'üì∞ Drupal', value: 'SiDrupal' },
          { title: 'üåä Edge', value: 'TbBrandEdge' },
          { title: 'üíß Elixir', value: 'SiElixir' },
          { title: 'üîß ESLint', value: 'SiEslint' },
          { title: 'üöÇ Express', value: 'SiExpress' },
          { title: '‚ö° FastAPI', value: 'SiFastapi' },
          { title: 'üé® Figma', value: 'SiFigma' },
          { title: 'üé® Figma (Brand)', value: 'TbBrandFigma' },
          { title: 'üî• Firebase', value: 'SiFirebase' },
          { title: 'ü¶ä Firefox', value: 'TbBrandFirefox' },
          { title: 'üå∂Ô∏è Flask', value: 'SiFlask' },
          { title: 'üéØ Flutter', value: 'SiDart' },
          { title: 'üé¨ Framer Motion', value: 'SiFramer' },
          { title: 'üì¶ Git', value: 'FaGitAlt' },
          { title: 'üì¶ Git (Brand)', value: 'TbBrandGit' },
          { title: 'üîÄ Git Branch', value: 'FiGitBranch' },
          { title: 'üêô GitHub', value: 'SiGithub' },
          { title: 'üêô GitHub (Brand)', value: 'TbBrandGithub' },
          { title: 'ü¶ä GitLab', value: 'SiGitlab' },
          { title: 'ü¶ä GitLab (Brand)', value: 'TbBrandGitlab' },
          { title: 'üêπ Go', value: 'SiGo' },
          { title: 'üêπ Golang (Brand)', value: 'TbBrandGolang' },
          { title: '‚òÅÔ∏è Google Cloud', value: 'SiGooglecloud' },
          { title: '‚òÅÔ∏è Google (Brand)', value: 'TbBrandGoogle' },
          { title: 'üî∑ GraphQL', value: 'SiGraphql' },
          { title: '‚äû Grid', value: 'FiGrid' },
          { title: 'üíø Hard Drive', value: 'FiHardDrive' },
          { title: 'üßÆ Haskell', value: 'SiHaskell' },
          { title: 'üíú Heroku', value: 'SiHeroku' },
          { title: 'üìÑ HTML5', value: 'SiHtml5' },
          { title: 'üß† IntelliJ', value: 'SiIntellijidea' },
          { title: '‚òï Java', value: 'FaJava' },
          { title: 'üìù JavaScript', value: 'SiJavascript' },
          { title: 'üìù JavaScript (Brand)', value: 'TbBrandJavascript' },
          { title: 'üÉè Jest', value: 'SiJest' },
          { title: 'üìÑ Joomla', value: 'SiJoomla' },
          { title: 'üî¨ Julia', value: 'SiJulia' },
          { title: 'ü§ñ Kotlin', value: 'SiKotlin' },
          { title: '‚ò∏Ô∏è Kubernetes', value: 'SiKubernetes' },
          { title: 'üìÑ LaTeX', value: 'SiLatex' },
          { title: 'üéº Laravel', value: 'SiLaravel' },
          { title: 'üéº Laravel (Brand)', value: 'TbBrandLaravel' },
          { title: 'üß© Layers', value: 'FiLayers' },
          { title: 'üé® Layout', value: 'FiLayout' },
          { title: 'üé® Less', value: 'SiLess' },
          { title: 'üêß Linux', value: 'FaLinux' },
          { title: 'üåô Lua', value: 'SiLua' },
          { title: 'üê¨ MariaDB', value: 'SiMariadb' },
          { title: 'üìù Markdown', value: 'SiMarkdown' },
          { title: 'üé≠ Material UI', value: 'SiMui' },
          { title: 'üìä Microsoft Office', value: 'FiPackage' },
          { title: 'üì± Mobile', value: 'TbDeviceMobile' },
          { title: 'üçÉ MongoDB', value: 'SiMongodb' },
          { title: 'üñ•Ô∏è Monitor', value: 'FiMonitor' },
          { title: 'üê¨ MySQL', value: 'SiMysql' },
          { title: 'üê± NestJS', value: 'SiNestjs' },
          { title: 'üåê Netlify', value: 'SiNetlify' },
          { title: '‚ñ≤ Next.js', value: 'SiNextdotjs' },
          { title: '‚ñ≤ Next.js (Brand)', value: 'TbBrandNextjs' },
          { title: 'üíö Node.js', value: 'SiNodedotjs' },
          { title: 'üíö Node.js (FA)', value: 'FaNodeJs' },
          { title: 'üíö Node.js (Brand)', value: 'TbBrandNodejs' },
          { title: 'üìù Notion', value: 'SiNotion' },
          { title: 'üì¶ npm', value: 'FaNpm' },
          { title: 'üì¶ Package', value: 'FiPackage' },
          { title: 'üê™ Perl', value: 'SiPerl' },
          { title: '‚ö° Performance', value: 'FiZap' },
          { title: 'üêò PHP', value: 'SiPhp' },
          { title: 'üêò PHP (Brand)', value: 'TbBrandPhp' },
          { title: 'üêò PostgreSQL', value: 'SiPostgresql' },
          { title: 'üìÆ Postman', value: 'SiPostman' },
          { title: 'üíÖ Prettier', value: 'SiPrettier' },
          { title: 'üêç Python', value: 'SiPython' },
          { title: 'üêç Python (Brand)', value: 'TbBrandPython' },
          { title: 'üìä R', value: 'SiR' },
          { title: 'üöÇ Railway', value: 'SiRailway' },
          { title: 'üçì Raspberry Pi', value: 'FaRaspberryPi' },
          { title: '‚öõÔ∏è React', value: 'SiReact' },
          { title: '‚öõÔ∏è React (FA)', value: 'FaReact' },
          { title: '‚öõÔ∏è React (Brand)', value: 'TbBrandReact' },
          { title: 'üì± React Native', value: 'TbBrandReactNative' },
          { title: 'üî¥ Redis', value: 'SiRedis' },
          { title: 'üé© Red Hat', value: 'TbBrandRedhat' },
          { title: 'üé≠ Remix', value: 'SiRemix' },
          { title: 'üíé Ruby', value: 'SiRuby' },
          { title: 'ü¶Ä Rust', value: 'SiRust' },
          { title: 'ü¶Ä Rust (Brand)', value: 'TbBrandRust' },
          { title: 'üß≠ Safari', value: 'TbBrandSafari' },
          { title: 'üìÑ Sanity', value: 'SiSanity' },
          { title: 'üí® Sass', value: 'SiSass' },
          { title: 'üéº Scala', value: 'SiScala' },
          { title: 'üñ•Ô∏è Server', value: 'FiServer' },
          { title: '‚öôÔ∏è Settings', value: 'FiSettings' },
          { title: 'üé® Sketch', value: 'TbBrandSketch' },
          { title: 'üí¨ Slack', value: 'SiSlack' },
          { title: 'üí¨ Slack (Brand)', value: 'TbBrandSlack' },
          { title: 'üì± Smartphone', value: 'FiSmartphone' },
          { title: '‚ö° Solid.js', value: 'SiSolid' },
          { title: 'üçÉ Spring', value: 'SiSpring' },
          { title: '‚¨ú Square', value: 'FiSquare' },
          { title: 'üóÑÔ∏è SQLite', value: 'SiSqlite' },
          { title: 'üìñ Storybook', value: 'SiStorybook' },
          { title: 'üöÄ Strapi', value: 'SiStrapi' },
          { title: 'üíÖ Styled Components', value: 'SiStyledcomponents' },
          { title: '‚ö° Supabase', value: 'SiSupabase' },
          { title: 'ü¶Ö Swift', value: 'SiSwift' },
          { title: 'üî• Svelte', value: 'SiSvelte' },
          { title: 'üî• Svelte (Brand)', value: 'TbBrandSvelte' },
          { title: 'üéµ Symfony', value: 'FaSymfony' },
          { title: 'üì± Tablet', value: 'FiTablet' },
          { title: 'üé® Tailwind CSS', value: 'SiTailwindcss' },
          { title: 'üé® Tailwind (Brand)', value: 'TbBrandTailwind' },
          { title: 'üì± Telegram', value: 'TbBrandTelegram' },
          { title: 'üíª Terminal', value: 'FiTerminal' },
          { title: 'üé® Three.js', value: 'SiThreedotjs' },
          { title: 'üõ†Ô∏è Tool', value: 'FiTool' },
          { title: 'üî∫ Triangle', value: 'FiTriangle' },
          { title: 'üìã Trello', value: 'SiTrello' },
          { title: 'üìò TypeScript', value: 'SiTypescript' },
          { title: 'üìò TypeScript (Brand)', value: 'TbBrandTypescript' },
          { title: 'üêß Ubuntu', value: 'FaUbuntu' },
          { title: 'üêß Ubuntu (Brand)', value: 'TbBrandUbuntu' },
          { title: '‚ñ≤ Vercel', value: 'SiVercel' },
          { title: '‚ö° Vite', value: 'SiVite' },
          { title: 'üíö Vue.js', value: 'SiVuedotjs' },
          { title: 'üíö Vue (Brand)', value: 'TbBrandVue' },
          { title: 'üéÆ WebGL', value: 'SiWebgl' },
          { title: 'üì¶ Webpack', value: 'SiWebpack' },
          { title: 'üíö WhatsApp', value: 'TbBrandWhatsapp' },
          { title: 'ü™ü Windows', value: 'FaWindows' },
          { title: 'ü™ü Windows (Brand)', value: 'TbBrandWindows' },
          { title: 'üì∞ WordPress', value: 'SiWordpress' },
          { title: 'üß∂ Yarn', value: 'FaYarn' },
          { title: 'üìπ Zoom', value: 'TbBrandZoom' },
          { title: 'üî∑ .NET', value: 'SiDotnet' },
        ],
        layout: 'dropdown',
      },
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: 'customIconName',
      title: '√çcone Customizado',
      type: 'string',
      description: ' OPCIONAL: Se preferir usar um √≠cone do React Icons em vez de upload, digite aqui o nome EXATO (ex: SiFlutter, FaDocker, TbBrandVscode). Caso contr√°rio, basta fazer upload do √≠cone no campo abaixo.',
      hidden: true,
    }),
    defineField({
      name: 'customIcon',
      title: '√çcone Customizado (Upload)',
      type: 'image',
      options: {
        hotspot: true,
      },
      hidden: ({ parent }) => parent?.iconName !== 'CUSTOM',
      validation: (Rule) =>
        Rule.custom((customIcon, context) => {
          const iconName = (context.parent as any)?.iconName
          if (iconName === 'CUSTOM' && !customIcon) {
            return 'Campo obrigat√≥rio quando "Customizado" est√° selecionado'
          }
          return true
        }),
    }),
    defineField({
      name: 'color',
      title: 'Cor da Marca',
      type: 'string',
      description: 'Cor oficial da tecnologia em hexadecimal (ex: #61DAFB para React, #3178C6 para TypeScript)',
      validation: (Rule) => Rule.required(),
    }),
    defineField({
      name: 'categories',
      title: 'Categorias',
      type: 'array',
      description: '‚úÖ Selecione uma ou mais categorias. Ex: TypeScript pode ser Linguagens + Frontend + Backend',
      of: [
        {
          type: 'string',
        },
      ],
      options: {
        list: [
          { title: 'üìù Linguagens', value: 'languages' },
          { title: 'üì¶ Frontend', value: 'frontend' },
          { title: 'üñ•Ô∏è Backend', value: 'backend' },
          { title: 'üíæ Base de Dados', value: 'database' },
          { title: 'üõ†Ô∏è Ferramentas', value: 'tools' },
        ],
        layout: 'grid',
      },
      validation: (Rule) => Rule.required().min(1).error('Selecione pelo menos uma categoria'),
    }),
    defineField({
      name: 'proficiencyLevel',
      title: 'N√≠vel de Profici√™ncia',
      type: 'number',
      description: 'Seu n√≠vel de conhecimento de 1 a 10 (1=Iniciante, 5=Intermedi√°rio, 10=Especialista)',
      validation: (Rule) => Rule.required().min(1).max(10),
    }),
    defineField({
      name: 'yearsOfExperience',
      title: 'Anos de Experi√™ncia',
      type: 'number',
      description: 'Quantos anos voc√™ trabalha com esta tecnologia (0-50 anos)',
      validation: (Rule) => Rule.min(0).max(50),
    }),
    defineField({
      name: 'description',
      title: 'Descri√ß√£o',
      type: 'text',
      rows: 2,
      description: 'Breve descri√ß√£o da sua experi√™ncia com esta habilidade. Aparecer√° no modal de detalhes.',
    }),
    defineField({
      name: 'order',
      title: 'Ordem de Exibi√ß√£o',
      type: 'number',
      description: 'Ordem de apari√ß√£o no portf√≥lio. N√∫meros menores aparecem primeiro (ex: 1, 2, 3...)',
    }),
    defineField({
      name: 'featured',
      title: 'Habilidade em Destaque',
      type: 'boolean',
      description: 'Marque para destacar esta habilidade com uma estrela especial',
      initialValue: false,
    }),
  ],
  orderings: [
    {
      title: 'Display Order',
      name: 'orderAsc',
      by: [{ field: 'order', direction: 'asc' }],
    },
    {
      title: 'Category',
      name: 'categoryAsc',
      by: [{ field: 'category', direction: 'asc' }],
    },
    {
      title: 'Proficiency Level',
      name: 'proficiencyDesc',
      by: [{ field: 'proficiencyLevel', direction: 'desc' }],
    },
  ],
  preview: {
    select: {
      title: 'name',
      categories: 'categories',
      proficiency: 'proficiencyLevel',
      featured: 'featured',
    },
    prepare({ title, categories, proficiency, featured }) {
      const categoryLabels: Record<string, string> = {
        languages: 'üìù Linguagens',
        frontend: 'üì¶ Frontend',
        backend: 'üñ•Ô∏è Backend',
        database: 'üíæ Database',
        tools: 'üõ†Ô∏è Ferramentas',
      }
      const categoryText = categories && categories.length > 0
        ? categories.map((cat: string) => categoryLabels[cat] || cat).join(', ')
        : 'Sem categoria'
      
      return {
        title: featured ? `‚≠ê ${title}` : title,
        subtitle: `${categoryText} ‚Ä¢ Level ${proficiency}/10`,
      }
    },
  },
})
